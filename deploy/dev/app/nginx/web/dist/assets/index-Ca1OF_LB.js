import{d as $,e as N,f as j}from"./system-BNU3s18R.js";import{z as K,A as q,r as M,i as V,s as B,w as a,k as e,l as i,j as w,p as g,d as U,E as A,b as E,t as F}from"./index-CM-BxXOe.js";const R={class:"dialog-footer"},L={name:"ArgOps"},P=Object.assign(L,{props:K({arg:Object},{modelValue:{},modelModifiers:{}}),emits:K(["success","close"],["update:modelValue"]),setup(C,{emit:n}){const _=q(C,"modelValue"),u=C,o=M({name:"",configKey:"",value:"",remark:""}),x={name:[{required:!0,message:"请输入参数名称",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,20}$/,message:"参数名称只能由2-20个汉字组成",trigger:"blur"}],configKey:[{required:!0,message:"请输入参数键名",trigger:"blur"},{pattern:/^[a-z_]{2,30}$/,message:"参数键名只能由2-30个小写字母或下划线组成",trigger:"blur"}],value:[{required:!0,message:"请输入参数键值",trigger:"blur"}]},v=n,b=V(null),f=()=>{b.value.validate(async d=>{d&&(u.arg?(await $(o),A.success("编辑成功")):(await N(o),A.success("新增成功")),v("success"),c())})},c=()=>{v("close"),b.value.resetFields(),o.remark=""},k=()=>{u.arg&&Object.keys(u.arg).forEach(d=>{o[d]=u.arg[d]})};return(d,t)=>{const l=i("el-input"),m=i("el-form-item"),y=i("el-form"),p=i("el-button"),z=i("el-dialog");return U(),B(z,{title:`${u.arg?"编辑":"新增"}参数`,center:"",modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=r=>_.value=r),onOpen:k,onClose:c},{footer:a(()=>[w("div",R,[e(p,{onClick:c},{default:a(()=>t[5]||(t[5]=[g("取消")])),_:1}),e(p,{type:"primary",onClick:f},{default:a(()=>t[6]||(t[6]=[g("确定")])),_:1})])]),default:a(()=>[e(y,{"label-width":"120",model:o,rules:x,ref_key:"argFormRef",ref:b},{default:a(()=>[e(m,{label:"参数名称",prop:"name"},{default:a(()=>[e(l,{placeholder:"请输入参数名称",modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.name=r),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(m,{label:"参数键名",prop:"configKey"},{default:a(()=>[e(l,{placeholder:"请输入参数键名",modelValue:o.configKey,"onUpdate:modelValue":t[1]||(t[1]=r=>o.configKey=r),modelModifiers:{trim:!0},disabled:!!u.arg},null,8,["modelValue","disabled"])]),_:1}),e(m,{label:"参数键值",prop:"value"},{default:a(()=>[e(l,{placeholder:"请输入参数键值",modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=r=>o.value=r),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(m,{label:"备注"},{default:a(()=>[e(l,{placeholder:"请输入备注",type:"textarea",rows:4,maxlength:"50","show-word-limit":"",modelValue:o.remark,"onUpdate:modelValue":t[3]||(t[3]=r=>o.remark=r),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),D={class:"bit-app-container"},T={class:"bit-table-box"},G={name:"ParameterPage"},Q=Object.assign(G,{setup(C){const n=M({name:"",configKey:"",pageNo:1,pageSize:3}),_=V([]),u=V(null);o();async function o(){const t=await j(n);_.value=t.list,u.value=t.totals}const x=t=>t+1+(n.pageNo-1)*n.pageSize,v=()=>{(n.name||n.configKey)&&o()},b=()=>{(n.name||n.configKey)&&(n.name=n.configKey="",o())},f=V(!1),c=V(null),k=t=>{f.value=!0,c.value=t},d=()=>{f.value=!1};return(t,l)=>{const m=i("el-input"),y=i("el-form-item"),p=i("el-button"),z=i("el-form"),r=i("el-table-column"),S=i("el-table"),O=i("el-pagination");return U(),E("section",D,[e(z,{"label-position":"top",inline:!0},{default:a(()=>[e(y,{label:"参数名称"},{default:a(()=>[e(m,{placeholder:"请输入参数名称",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=s=>n.name=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(y,{label:"参数键名"},{default:a(()=>[e(m,{placeholder:"请输入参数键名",modelValue:n.configKey,"onUpdate:modelValue":l[1]||(l[1]=s=>n.configKey=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(y,{label:"操作",class:"nolabel"},{default:a(()=>[e(p,{type:"primary",onClick:v},{default:a(()=>l[6]||(l[6]=[g("搜索")])),_:1}),e(p,{onClick:b},{default:a(()=>l[7]||(l[7]=[g("重置")])),_:1})]),_:1})]),_:1}),w("div",T,[e(p,{type:"primary",plain:"",class:"bit-btn-add",onClick:l[2]||(l[2]=s=>k(null))},{default:a(()=>l[8]||(l[8]=[g(" 新增 ")])),_:1}),e(S,{"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"},data:_.value},{default:a(()=>[e(r,{label:"参数编号",type:"index",index:x,width:"180"}),e(r,{label:"参数名称",prop:"name"}),e(r,{label:"参数键名",prop:"configKey"}),e(r,{label:"参数键值",prop:"value"}),e(r,{label:"备注"},{default:a(({row:s})=>[g(F(s.remark||"无"),1)]),_:1}),e(r,{label:"操作"},{default:a(({row:s})=>[e(p,{type:"primary",link:"",onClick:H=>k(s)},{default:a(()=>l[9]||(l[9]=[g(" 编辑 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(O,{"current-page":n.pageNo,"onUpdate:currentPage":l[3]||(l[3]=s=>n.pageNo=s),"page-size":n.pageSize,"onUpdate:pageSize":l[4]||(l[4]=s=>n.pageSize=s),total:u.value,"page-sizes":[2,3,5],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:o,onCurrentChange:o},null,8,["current-page","page-size","total"])]),e(P,{modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=s=>f.value=s),arg:c.value,onClose:d,onSuccess:o},null,8,["modelValue","arg"])])}}});export{Q as default};
