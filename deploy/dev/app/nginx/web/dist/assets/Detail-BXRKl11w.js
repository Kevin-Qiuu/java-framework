import{h as N,i as q,j as A}from"./system-BNU3s18R.js";import{z as w,A as R,r as M,n as S,i as D,s as B,w as a,k as e,l as u,u as E,j as O,p as f,d as $,E as U,b as F,t as L}from"./index-CM-BxXOe.js";const P={class:"dialog-footer"},T={name:"DictDataOps"},G=Object.assign(T,{props:w({dictData:Object},{modelValue:{},modelModifiers:{}}),emits:w(["success","close"],["update:modelValue"]),setup(x,{emit:K}){const o=S(),y=R(x,"modelValue"),r=x,d=K,n=M({typeKey:o.query.typeKey,dataKey:"",value:"",status:"enable",remark:"",sort:""}),z={value:[{required:!0,message:"请输入字典名称",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,20}$/,message:"字典名称由2-20个汉字组成",trigger:"blur"}],dataKey:[{required:!0,message:"请输入字典键值",trigger:"blur"},{pattern:/^[a-z_]{2,30}$/,message:"字典键值由2-30个字母或下划线组成",trigger:"blur"}]},v=D(null),_=()=>{v.value.validate(async c=>{c&&(r.dictData?(await N(n),U.success("编辑成功")):(await q(n),U.success("新增成功")),d("success"),b())})},b=()=>{d("close"),v.value.resetFields(),n.sort=n.remark=""},k=()=>{r.dictData&&Object.keys(r.dictData).forEach(c=>{n[c]=r.dictData[c]})};return(c,l)=>{const t=u("el-input"),p=u("el-form-item"),V=u("el-input-number"),g=u("el-form"),C=u("el-button"),m=u("el-dialog");return $(),B(m,{title:`${r.dictData?"编辑":"新增"}字典键值`,center:"",modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=i=>y.value=i),onOpen:k,onClose:b},{footer:a(()=>[O("div",P,[e(C,{onClick:b},{default:a(()=>l[5]||(l[5]=[f("取消")])),_:1}),e(C,{type:"primary",onClick:_},{default:a(()=>l[6]||(l[6]=[f("确定")])),_:1})])]),default:a(()=>[e(g,{"label-width":"120",model:n,rules:z,ref_key:"dictDataFormRef",ref:v},{default:a(()=>[e(p,{label:"字典名称"},{default:a(()=>[e(t,{value:E(o).query.typeKey,disabled:""},null,8,["value"])]),_:1}),e(p,{label:"字典标签",prop:"value"},{default:a(()=>[e(t,{placeholder:"请输入字典标签",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=i=>n.value=i),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(p,{label:"字典键值",prop:r.dictData?"":"dataKey"},{default:a(()=>[e(t,{placeholder:"请输入字典键值",modelValue:n.dataKey,"onUpdate:modelValue":l[1]||(l[1]=i=>n.dataKey=i),modelModifiers:{trim:!0},disabled:!!r.dictData},null,8,["modelValue","disabled"])]),_:1},8,["prop"]),e(p,{label:"显示排序"},{default:a(()=>[e(V,{"controls-position":"right",min:1,modelValue:n.sort,"onUpdate:modelValue":l[2]||(l[2]=i=>n.sort=i)},null,8,["modelValue"])]),_:1}),e(p,{label:"备注"},{default:a(()=>[e(t,{type:"textarea",rows:4,maxlength:"50","show-word-limit":"",placeholder:"请输入备注",modelValue:n.remark,"onUpdate:modelValue":l[3]||(l[3]=i=>n.remark=i),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),H={class:"bit-app-container"},I={class:"bit-table-box"},J={name:"DictionaryDetail"},Y=Object.assign(J,{setup(x){const K=S(),o=M({value:"",typeKey:K.query.typeKey,pageNo:1,pageSize:3}),y=D([]),r=D(null);d();async function d(){const l=await A(o);y.value=l.list,r.value=l.totals}const n=l=>l+1+(o.pageNo-1)*o.pageSize,z=()=>{o.value&&d()},v=()=>{o.value&&(o.value="",d())},_=D(!1),b=D(null),k=l=>{_.value=!0,b.value=l},c=()=>{_.value=!1};return(l,t)=>{const p=u("el-input"),V=u("el-form-item"),g=u("el-button"),C=u("el-form"),m=u("el-table-column"),i=u("el-table"),j=u("el-pagination");return $(),F("section",H,[e(C,{"label-position":"top",inline:!0},{default:a(()=>[e(V,{label:"字典名称"},{default:a(()=>[e(p,{placeholder:"请输入字典名称",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(V,{label:"字典标签"},{default:a(()=>[e(p,{placeholder:"请输入字典标签",modelValue:o.typeKey,"onUpdate:modelValue":t[1]||(t[1]=s=>o.typeKey=s),disabled:""},null,8,["modelValue"])]),_:1}),e(V,{label:"操作",class:"nolabel"},{default:a(()=>[e(g,{type:"primary",onClick:z},{default:a(()=>t[6]||(t[6]=[f("搜索")])),_:1}),e(g,{onClick:v},{default:a(()=>t[7]||(t[7]=[f("重置")])),_:1})]),_:1})]),_:1}),O("div",I,[e(g,{class:"bit-btn-add",type:"primary",plain:"",onClick:t[2]||(t[2]=s=>k(null))},{default:a(()=>t[8]||(t[8]=[f(" 新增 ")])),_:1}),e(i,{"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"},data:y.value},{default:a(()=>[e(m,{label:"字典编号",type:"index",index:n,width:"150"}),e(m,{label:"字典标签",prop:"value"}),e(m,{label:"字典键值",prop:"dataKey"}),e(m,{label:"排序",prop:"sort"}),e(m,{label:"备注"},{default:a(({row:s})=>[f(L(s.remark||"无"),1)]),_:1}),e(m,{label:"操作"},{default:a(({row:s})=>[e(g,{type:"primary",link:"",onClick:Q=>k(s)},{default:a(()=>t[9]||(t[9]=[f(" 编辑 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(j,{"current-page":o.pageNo,"onUpdate:currentPage":t[3]||(t[3]=s=>o.pageNo=s),"page-size":o.pageSize,"onUpdate:pageSize":t[4]||(t[4]=s=>o.pageSize=s),total:r.value,"page-sizes":[2,3,5],background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:d,onSizeChange:d},null,8,["current-page","page-size","total"])]),e(G,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=s=>_.value=s),onSuccess:d,onClose:c,dictData:b.value},null,8,["modelValue","dictData"])])}}});export{Y as default};
