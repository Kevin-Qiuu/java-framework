import{p as R,g as S}from"./system-BNU3s18R.js";import{R as j}from"./index-DQDOq0pW.js";import{z as A,A as E,r as M,i as N,s as F,w as l,k as e,l as a,p as m,j as $,d as L,E as q,b as B,t as P,u as z}from"./index-CM-BxXOe.js";const D={class:"dialog-footer"},T={name:"AccountOps"},Z=Object.assign(T,{props:A({sysUser:Object},{modelValue:{},modelModifiers:{}}),emits:A(["success","close"],["update:modelValue"]),setup(w,{emit:r}){const f=E(w,"modelValue"),n=w;console.log(n.sysUser);const s=M({phoneNumber:"",password:"",identity:"",nickName:"",status:"enable",remark:""}),C={phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6-20个字符之间",trigger:"blur"}],identity:[{required:!0,message:"请选择身份",trigger:"change"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{pattern:/^[a-zA-Z\u4e00-\u9fa5]{2,20}$/,message:"昵称只能由字母或汉字组成,长度在2-20之间",trigger:"blur"}]},p=N(null),y=r,v=()=>{p.value.validate(async t=>{t&&(await R(s),q.success(n.sysUser?"编辑成功":"新增成功"),y("success"),g())})},g=()=>{y("close"),p.value.resetFields(),s.status="enable",s.remark=""},V=()=>{n.sysUser&&Object.keys(n.sysUser).forEach(t=>{s[t]=n.sysUser[t]})};return(t,o)=>{const b=a("el-input"),i=a("el-form-item"),U=a("el-option"),_=a("el-select"),k=a("el-radio"),c=a("el-radio-group"),x=a("el-form"),u=a("el-button"),O=a("el-dialog");return L(),F(O,{title:n.sysUser?"编辑平台账号":"新增平台账号",center:"",modelValue:f.value,"onUpdate:modelValue":o[6]||(o[6]=d=>f.value=d),onOpen:V,onClose:g},{footer:l(()=>[$("div",D,[e(u,{onClick:g},{default:l(()=>o[9]||(o[9]=[m("取消")])),_:1}),e(u,{type:"primary",onClick:v},{default:l(()=>o[10]||(o[10]=[m("确定")])),_:1})])]),default:l(()=>[e(x,{ref_key:"accountFormRef",ref:p,"label-width":"120",model:s,rules:C},{default:l(()=>[e(i,{label:"用户手机号",prop:"phoneNumber"},{default:l(()=>[e(b,{type:"number",placeholder:"请输入用户手机号",modelValue:s.phoneNumber,"onUpdate:modelValue":o[0]||(o[0]=d=>s.phoneNumber=d)},null,8,["modelValue"])]),_:1}),e(i,{label:"用户密码",prop:n.sysUser?"":"password"},{default:l(()=>[e(b,{type:"password","show-password":"",disabled:!!n.sysUser,placeholder:n.sysUser?"密码不可修改":"请输入用户密码",modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=d=>s.password=d),modelModifiers:{trim:!0}},null,8,["disabled","placeholder","modelValue"])]),_:1},8,["prop"]),e(i,{label:"用户角色",prop:"identity"},{default:l(()=>[e(_,{modelValue:s.identity,"onUpdate:modelValue":o[2]||(o[2]=d=>s.identity=d),placeholder:"请选择角色"},{default:l(()=>[e(U,{value:"super_admin",label:"超级管理员"}),e(U,{value:"platform_admin",label:"平台管理员"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"用户昵称",prop:"nickName"},{default:l(()=>[e(b,{placeholder:"请输入用昵称",modelValue:s.nickName,"onUpdate:modelValue":o[3]||(o[3]=d=>s.nickName=d),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(i,{label:"用户状态"},{default:l(()=>[e(c,{modelValue:s.status,"onUpdate:modelValue":o[4]||(o[4]=d=>s.status=d)},{default:l(()=>[e(k,{value:"enable"},{default:l(()=>o[7]||(o[7]=[m("启用")])),_:1}),e(k,{value:"disable"},{default:l(()=>o[8]||(o[8]=[m("停用")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"备注"},{default:l(()=>[e(b,{modelValue:s.remark,"onUpdate:modelValue":o[5]||(o[5]=d=>s.remark=d),placeholder:"请输入备注",type:"textarea",rows:4,maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),G={class:"bit-app-container"},H={class:"bit-table-box"},I={name:"AccountPage"},W=Object.assign(I,{setup(w){const r=M({phoneNumber:"",status:""}),f=N([]);n();async function n(){f.value=await S(r)}const s=()=>{(r.phoneNumber||r.status)&&n()},C=()=>{(r.phoneNumber||r.status)&&(r.phoneNumber=r.status="",n())},p=N(!1),y=N(null),v=V=>{p.value=!0,y.value={...V,identity:V.identity.toLowerCase()}},g=()=>{p.value=!1};return(V,t)=>{const o=a("el-input"),b=a("el-form-item"),i=a("el-option"),U=a("el-select"),_=a("el-button"),k=a("el-form"),c=a("el-table-column"),x=a("el-table");return L(),B("section",G,[e(k,{"label-position":"top",inline:!0},{default:l(()=>[e(b,{label:"用户手机号"},{default:l(()=>[e(o,{type:"number",placeholder:"请输入手机号",modelValue:r.phoneNumber,"onUpdate:modelValue":t[0]||(t[0]=u=>r.phoneNumber=u)},null,8,["modelValue"])]),_:1}),e(b,{label:"用户状态"},{default:l(()=>[e(U,{placeholder:"请输入用户状态",modelValue:r.status,"onUpdate:modelValue":t[1]||(t[1]=u=>r.status=u)},{default:l(()=>[e(i,{value:"enable"},{default:l(()=>t[4]||(t[4]=[m("启用")])),_:1}),e(i,{value:"disable"},{default:l(()=>t[5]||(t[5]=[m("停用")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"操作",class:"nolabel"},{default:l(()=>[e(_,{type:"primary",onClick:s},{default:l(()=>t[6]||(t[6]=[m("搜索")])),_:1}),e(_,{onClick:C},{default:l(()=>t[7]||(t[7]=[m("重置")])),_:1})]),_:1})]),_:1}),$("div",H,[e(_,{type:"primary",plain:"",class:"bit-btn-add",onClick:t[2]||(t[2]=u=>v(null))},{default:l(()=>t[8]||(t[8]=[m(" 新增 ")])),_:1}),e(x,{data:f.value,"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"}},{default:l(()=>[e(c,{label:"序号",type:"index",width:"120"}),e(c,{label:"用户角色"},{default:l(({row:u})=>[m(P(z(j)[u.identity.toLowerCase()]),1)]),_:1}),e(c,{label:"手机号",prop:"phoneNumber"}),e(c,{label:"用户昵称",prop:"nickName"}),e(c,{label:"备注",prop:"remark"}),e(c,{label:"操作"},{default:l(({row:u})=>[e(_,{type:"primary",link:"",onClick:O=>v(u)},{default:l(()=>t[9]||(t[9]=[m(" 编辑 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),e(Z,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=u=>p.value=u),sysUser:y.value,onSuccess:n,onClose:g},null,8,["modelValue","sysUser"])])}}});export{W as default};
