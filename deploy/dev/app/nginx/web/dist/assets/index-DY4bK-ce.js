import{a as T,b as j,c as A}from"./system-BNU3s18R.js";import{z as $,A as R,r as S,i as v,s as q,w as o,k as e,l as i,j as M,p as _,d as U,E as w,b as B,m as E,u as F,t as L}from"./index-CM-BxXOe.js";const P={class:"dialog-footer"},G={name:"DictTypeOps"},H=Object.assign(G,{props:$({dict:Object},{modelValue:{},modelModifiers:{}}),emits:$(["success","close"],["update:modelValue"]),setup(x,{emit:l}){const V=R(x,"modelValue"),u=x,s=S({remark:"",value:"",typeKey:""}),d=l,K={remark:[{required:!0,message:"备注不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,50}$/,message:"备注只能由2-50个中文组成",trigger:"blur"}],value:[{required:!0,message:"字典名称不能为空",trigger:"blur"},{pattern:/^[\u4e00-\u9fa5]{2,20}$/,message:"字典名称只能由2-20个中文组成",trigger:"blur"}],typeKey:[{required:!0,message:"字典类型不能为空",trigger:"blur"},{pattern:/^[a-z_]{2,30}$/,message:"字典类型只能由2-30个字母或下划线组成",trigger:"blur"}]},m=v(null),k=()=>{m.value.validate(async c=>{c&&(u.dict?(await T(s),w.success("编辑成功")):(await j(s),w.success("新增成功")),d("success"),f())})},f=()=>{d("close"),m.value.resetFields()},z=()=>{u.dict&&Object.keys(u.dict).forEach(c=>{s[c]=u.dict[c]})};return(c,n)=>{const r=i("el-input"),t=i("el-form-item"),C=i("el-form"),y=i("el-button"),g=i("el-dialog");return U(),q(g,{title:`${u.dict?"编辑":"新增"}字段类型`,center:"",modelValue:V.value,"onUpdate:modelValue":n[3]||(n[3]=p=>V.value=p),onOpen:z,onClose:f},{footer:o(()=>[M("div",P,[e(y,{onClick:f},{default:o(()=>n[4]||(n[4]=[_("取消")])),_:1}),e(y,{type:"primary",onClick:k},{default:o(()=>n[5]||(n[5]=[_("确定")])),_:1})])]),default:o(()=>[e(C,{"label-width":"120",model:s,rules:K,ref_key:"dictFormRef",ref:m},{default:o(()=>[e(t,{label:"字典名称",prop:"value"},{default:o(()=>[e(r,{placeholder:"请输入字典名称",modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=p=>s.value=p),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(t,{label:"字典类型",prop:"typeKey"},{default:o(()=>[e(r,{placeholder:"请输入字典类型",modelValue:s.typeKey,"onUpdate:modelValue":n[1]||(n[1]=p=>s.typeKey=p),modelModifiers:{trim:!0},disabled:!!u.dict},null,8,["modelValue","disabled"])]),_:1}),e(t,{label:"备注",prop:"remark"},{default:o(()=>[e(r,{type:"textarea",maxlength:"50","show-word-limit":"",rows:4,modelValue:s.remark,"onUpdate:modelValue":n[2]||(n[2]=p=>s.remark=p),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),I={class:"bit-app-container"},J={class:"bit-table-box"},Q=["onClick"],W={name:"DictionaryPage"},Z=Object.assign(W,{setup(x){const l=S({value:"",typeKey:"",pageNo:1,pageSize:3}),V=E();d();const u=v([]),s=v(null);async function d(){const r=await A(l);u.value=r.list,s.value=r.totals}const K=r=>r+1+l.pageSize*(l.pageNo-1),m=v(!1),k=v(null),f=r=>{m.value=!0,k.value=r},z=()=>{m.value=!1},c=()=>{(l.value||l.typeKey)&&d()},n=()=>{(l.value||l.typeKey)&&(l.value=l.typeKey="",d())};return(r,t)=>{const C=i("el-input"),y=i("el-form-item"),g=i("el-button"),p=i("el-form"),b=i("el-table-column"),D=i("el-table"),O=i("el-pagination");return U(),B("section",I,[e(p,{inline:!0,"label-position":"top"},{default:o(()=>[e(y,{label:"字典名称"},{default:o(()=>[e(C,{placeholder:"请输入字典名称",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(y,{label:"字典类型"},{default:o(()=>[e(C,{placeholder:"请输入字典类型",modelValue:l.typeKey,"onUpdate:modelValue":t[1]||(t[1]=a=>l.typeKey=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(y,{label:"操作",class:"nolabel"},{default:o(()=>[e(g,{type:"primary",onClick:c},{default:o(()=>t[6]||(t[6]=[_("搜索")])),_:1}),e(g,{onClick:n},{default:o(()=>t[7]||(t[7]=[_("重置")])),_:1})]),_:1})]),_:1}),M("div",J,[e(g,{type:"primary",plain:"",class:"bit-btn-add",onClick:t[2]||(t[2]=a=>f(null))},{default:o(()=>t[8]||(t[8]=[_(" 新增 ")])),_:1}),e(D,{"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"},data:u.value},{default:o(()=>[e(b,{label:"编号",type:"index",width:"120",index:K}),e(b,{label:"字典名称",prop:"value"}),e(b,{label:"字典类型"},{default:o(({row:a})=>[M("div",{class:"link-type",onClick:N=>F(V).push("/system/dictionaryDetail?typeKey="+a.typeKey)},L(a.typeKey),9,Q)]),_:1}),e(b,{label:"备注",prop:"remark"}),e(b,{label:"操作"},{default:o(({row:a})=>[e(g,{type:"primary",link:"",onClick:N=>f(a)},{default:o(()=>t[9]||(t[9]=[_(" 编辑 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(O,{"current-page":l.pageNo,"onUpdate:currentPage":t[3]||(t[3]=a=>l.pageNo=a),"page-size":l.pageSize,"onUpdate:pageSize":t[4]||(t[4]=a=>l.pageSize=a),"page-sizes":[2,3,5,8],total:s.value,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","total"])]),e(H,{modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=a=>m.value=a),dict:k.value,onSuccess:d,onClose:z},null,8,["modelValue","dict"])])}}});export{Z as default};
